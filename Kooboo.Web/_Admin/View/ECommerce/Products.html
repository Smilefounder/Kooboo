<!-- #layout name=blank-->
<style>
  .product-item {
    border: 1px solid #ddd;
    margin-bottom: 15px;
    display: flex;
  }
</style>

<div id="app" v-cloak>
  <div class="page-header">
    <h1 class="title">Products management</h1>
  </div>
  <kb-breadcrumb :breads="breads"></kb-breadcrumb>
  <div class="navbar navbar-default">
    <div class="container-fluid">
      <a class="btn green navbar-btn" @click="addProduct">Add product</a>
      <a class="btn red navbar-btn">Delete</a>
    </div>
  </div>
  <div class="product-item" v-for="product in list" :key="product.id">
    <div
      class="image"
      style="width: 120px"
      :style="{backgroundImage:getPrimaryImg(product.images)}"
    ></div>
    <div style="flex: 1">
      <h3>{{product.title}}</h3>
      <div>
        <div>库存：<span>{{product.stock}}</span></div>
        <div>销量：<span>{{product.sales}}</span></div>
      </div>
    </div>
    <div
      style="
        width: 100px;
        display: flex;
        justify-content: center;
        align-items: center;
      "
    >
      <a class="btn blue" target="_blank" :href="editProduct(product)"
        >Setting</a
      >
    </div>
  </div>
  <!-- <kb-table
    :data="tableData"
    show-select
    :selected.sync="selected"
    class="table-bordered"
  >
    <kb-table-column
      v-for="(column, index) in defaultColumns"
      :label="column"
      :prop="column"
      :key="index"
    >
    </kb-table-column>
    <kb-table-column :label="Kooboo.text.common.ProductType">
      <template v-slot="row">
        <span :class="['label', row.productType.class]"
          >{{ row.productType.text }}</span
        >
      </template>
    </kb-table-column>
    <kb-table-column head-class="table-action" body-class="table-action">
      <template v-slot="row">
        <a class="btn btn-sm blue" :href="row.edit.url" @click.stop>
          {{ row.edit.text }}
        </a>
      </template>
    </kb-table-column>
  </kb-table>
  <kb-pager
    :page-nr="pager.pageNr"
    :total-pages="pager.totalPages"
    @change="changePage"
  ></kb-pager> -->
  <kb-pager
    :page-nr="pager.pageNr"
    :total-pages="pager.totalPages"
    @change="changePage"
  ></kb-pager>
  <kb-category-modal v-model="showCategoryModal" @start="startAddProduct" />
</div>
<script>
  (function () {
    Kooboo.loadJS([
      "/_Admin/Scripts/kooboo/Guid.js",
      "/_Admin/Scripts/components/kbTable.js",
      "/_Admin/Scripts/components/kbBreadcrumb.js",
      "/_Admin/Scripts/components/kbPager.js",
      "/_Admin/Scripts/components/ECommerce/kb-category-modal.js",
    ]);
  })();
</script>
<script src="/_Admin/View/ECommerce/Products.js"></script>
